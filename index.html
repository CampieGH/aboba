<!DOCTYPE html>
<html lang="ru">
<head>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="favicon.ico" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>–∞–±–æ–±–∞</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>

  <div id="splashScreen">
    <div id="splashText">–∞–±–æ–±–∞.</div>
    <div id="splashSubText"></div>
  </div>

  <div id="app">
    <div id="loginForm" role="region" aria-label="–§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞">
      <h2>–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</h2>
      <button id="googleLoginBtn" aria-label="–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google">üîê –í–æ–π—Ç–∏ —Å Google</button>
      <p id="loginMsg" role="alert" aria-live="assertive"></p>
    </div>

    <div id="onboarding" style="display:none;">
      <div class="onboarding-inner">
        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∑–∞–∫—Ä—ã—Ç—É—é –∞–ª—å—Ñ—É üëã</h2>
        <p>–ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å:</p>
        <ul>
          <li>–ü–ª—é—Å–∏–∫ —Å–ª–µ–≤–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—á –≤ –≥—Ä—É–ø–ø—É –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ª—Å (–Ω–∏–∫–Ω–µ–π–º –≤–º–µ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã - –ª—Å)</li>
          <li>‚öôÔ∏è - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –¢–∞–º –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –Ω–∏–∫, –µ–≥–æ —Ü–≤–µ—Ç, —Å—Ç–∞—Ç—É—Å –∏ –≤—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É (–∞–≤–∞—Ç–∞—Ä–∫–∞)</li>
          <li>–ú–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∞–π—Ç, –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏—Å—Ç–µ–º—ã, –æ–±—ã—á–Ω–æ —á–µ—Ä–µ–∑ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" - "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π" (—É–¥–æ–±–Ω–æ, –Ω–æ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</li>
          <li>–ü–æ –≤—Å–µ–º –æ—à–∏–±–∫–∞–∏, –±–∞–≥–∞–º (–∏—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ!) –∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è–º –ø–∏—à–∏—Ç–µ –º–Ω–µ –≤ –ª—Å –∑–¥–µ—Å—å, –ª–∏–±–æ –≥–¥–µ —É–¥–æ–±–Ω–æ (—Ç–∞–∫ –≤—ã –ø–æ–º–æ–∂–µ—Ç–µ –ø—Ä–æ–µ–∫—Ç—É)</li>
          <li>–ü—Ä–∞–≤–∏–ª–∞ –æ–±—ã—á–Ω—ã–µ: –∑–∞–ø—Ä–µ—â–µ–Ω—ã –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∑–∞–∫–æ–Ω–∞ –∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –¥–µ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏—á–∏–Ω–∏—Ç—å –≤—Ä–µ–¥ –∫–æ–º—É-–ª–∏–±–æ –∏–ª–∏ —á–µ–º—É-–ª–∏–±–æ</li>
          <li>–°–æ–æ–±—â–µ–Ω–∏—è –∏ –ª—Å –ø–æ–∫–∞ –Ω–µ –∑–∞—â–∏—â–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é, –Ω–µ –¥–µ–ª–∏—Ç–µ—Å—å —Å–ª–∏—à–∫–æ–º –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π!</li>
          <li>–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</li>
        <label><input type="checkbox" id="dontShowAgain"> –ë–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å</label>
        <button id="onboardingOk">–ü–æ–Ω</button>
      </div>
    </div>

    <div id="chatLayout" role="main" aria-live="polite" aria-atomic="false">
      <aside id="groupList" role="list" aria-label="–°–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø —á–∞—Ç–∞"></aside>
      <main id="chatArea">
        <div id="groupNameDisplay" aria-live="polite" aria-atomic="true"></div>
        <div id="messages" role="log" aria-live="polite" aria-relevant="additions"></div>
      </main>
    </div>

    <form id="chatInput" aria-label="–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π">
      <textarea
        id="messageInput"
        placeholder="–ù–∞–ø–∏—Å–∞—Ç—å..."
        autocomplete="off"
        required
        spellcheck="false"
        rows="1"
        maxlength="1000"
        aria-describedby="charCount"
        aria-label="–ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è"
        aria-multiline="true"
      ></textarea>
      <div id="charCount" aria-live="polite">1000</div>
      <button type="submit" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>

    <button id="profileBtn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è" aria-haspopup="true" aria-expanded="false">‚öô</button>

    <div id="profilePanel" role="region" aria-label="–ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ—Ñ–∏–ª—è" tabindex="-1">
      <form id="profileForm" novalidate>
        <input id="profileNick" maxlength="30" placeholder="–ù–∏–∫" autocomplete="off" spellcheck="false" aria-label="–ù–∏–∫" />
        <p id="profileNickError" style="color:#f44336; display:none; font-size:14px; margin-top:4px;"></p>
        <input id="profileAvatar" placeholder="–ê–≤–∞—Ç–∞—Ä URL" autocomplete="off" spellcheck="false" aria-label="URL –∞–≤–∞—Ç–∞—Ä–∞" />
        <input type="color" id="profileColor" title="–¶–≤–µ—Ç –Ω–∏–∫–∞" aria-label="–¶–≤–µ—Ç –Ω–∏–∫–∞" />
        <textarea
          id="profileStatus"
          maxlength="80"
          placeholder="–°—Ç–∞—Ç—É—Å"
          spellcheck="false"
          aria-label="–°—Ç–∞—Ç—É—Å"
        ></textarea>
        <small id="statusCounter" aria-live="polite">80</small>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button type="button" id="logoutBtn">–í—ã–π—Ç–∏</button>
      </form>
    </div>
  </div>

  <div
    id="userProfileModal"
    class="modal"
    aria-hidden="true"
    role="dialog"
    aria-modal="true"
    aria-labelledby="userModalNick"
  >
    <div class="modal-content">
      <span
        id="closeUserModal"
        class="close"
        role="button"
        tabindex="0"
        aria-label="–ó–∞–∫—Ä—ã—Ç—å"
        >&times;</span
      >
      <div class="modal-avatar" id="userModalAvatar" aria-hidden="true"></div>
      <h3 id="userModalNick"></h3>
      <p id="userModalStatus"></p>
      <button id="userModalMsgBtn" enabled>üí¨ –ù–∞–ø–∏—Å–∞—Ç—å</button>
    </div>
  </div>

  <!-- ===== –ú–û–î–ê–õ–ö–ê –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ö –ì–†–£–ü–ü–ï ===== -->
  <div id="joinGroupModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-content">
      <span id="closeJoinModal" class="close" role="button" tabindex="0" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</span>
      <h3>–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É/—á–∞—Ç</h3>
      <form id="joinGroupForm">
        <input type="text" id="joinGroupName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" required />
        <input type="text" id="joinGroupCode" placeholder="–ö–æ–¥ (–µ—Å–ª–∏ –µ—Å—Ç—å)" />
        <input type="password" id="joinGroupPassword" placeholder="–ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ –µ—Å—Ç—å)" />
        <p id="joinGroupError" style="color:#f44336; display:none;"></p>
        <button type="submit">–í–æ–π—Ç–∏</button>
      </form>
    </div>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ ‚ûï –Ω–∞ –ø–∞–Ω–µ–ª—å –≥—Ä—É–ø–ø -->
  <button
    id="openJoinModalBtn"
    title="–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É"
    aria-label="–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É"
    style="display: none; margin:1em auto; padding:0.6em; border:none; border-radius:6px; background:#333; color:#fff; cursor:pointer;"
  >
    ‚ûï
  </button>

  <script type="module" src="./splash.js"></script>
  <script type="module" src="./app.js"></script>
  <script type="module" src="./input.js"></script>
</body>
</html>
